<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EntityFilters Mobile-First Redesign Prototype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom animations */
        .slide-down {
            animation: slideDown 0.2s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .filter-drawer {
            transition: all 0.3s ease-in-out;
            overflow: hidden;
        }

        .filter-drawer.collapsed {
            max-height: 0;
            opacity: 0;
        }

        .filter-drawer.expanded {
            max-height: 500px;
            opacity: 1;
        }

        /* Mobile drawer overlay */
        .mobile-overlay {
            transition: opacity 0.3s ease-in-out;
        }

        .mobile-drawer {
            transition: transform 0.3s ease-in-out;
        }

        .mobile-drawer.closed {
            transform: translateY(100%);
        }

        .mobile-drawer.open {
            transform: translateY(0);
        }

        /* Touch-friendly sizing */
        .touch-target {
            min-height: 44px;
            min-width: 44px;
        }

        /* Filter chip animations */
        .filter-chip {
            transition: all 0.2s ease-in-out;
        }

        .filter-chip:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Demo Container -->
    <div class="max-w-6xl mx-auto p-4 space-y-8">

        <!-- Header -->
        <div class="text-center py-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">EntityFilters Mobile-First Redesign</h1>
            <p class="text-gray-600">Collapsible, space-efficient filter system</p>
            <div class="mt-4 flex justify-center gap-4">
                <button onclick="setViewport('mobile')" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Mobile View</button>
                <button onclick="setViewport('tablet')" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">Tablet View</button>
                <button onclick="setViewport('desktop')" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">Desktop View</button>
            </div>
        </div>

        <!-- Demo Device Frame -->
        <div id="device-frame" class="mx-auto bg-white rounded-xl shadow-2xl overflow-hidden transition-all duration-500" style="width: 375px;">

            <!-- Mock Page Header -->
            <div class="bg-white border-b border-gray-200 p-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-xl font-semibold text-gray-900">Contacts</h2>
                        <p class="text-sm text-gray-500">Manage 1,247 contacts</p>
                    </div>
                    <button class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium">
                        Add Contact
                    </button>
                </div>
            </div>

            <!-- BEFORE: Current EntityFilters (overwhelming) -->
            <div id="before-section" class="p-4 bg-red-50 border-l-4 border-red-400">
                <h3 class="font-medium text-red-800 mb-3">❌ BEFORE: Current Implementation</h3>
                <div class="space-y-4 bg-white p-4 rounded-lg">
                    <!-- Search -->
                    <div>
                        <label class="text-xs font-medium text-gray-500">Search</label>
                        <div class="relative mt-1">
                            <input type="text" placeholder="Search contacts by name, email..."
                                   class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg">
                            <svg class="absolute left-3 top-2.5 h-4 w-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </div>
                    </div>

                    <!-- Time Range -->
                    <div>
                        <label class="text-xs font-medium text-gray-500">Time Range</label>
                        <select class="w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg">
                            <option>This Month</option>
                            <option>Last Week</option>
                            <option>Last Month</option>
                        </select>
                    </div>

                    <!-- Principal -->
                    <div>
                        <label class="text-xs font-medium text-gray-500">Principal</label>
                        <select class="w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg">
                            <option>All Principals</option>
                            <option>John Smith</option>
                            <option>Sarah Johnson</option>
                        </select>
                    </div>

                    <!-- Quick Filters -->
                    <div>
                        <label class="text-xs font-medium text-gray-500">Quick Filters</label>
                        <div class="flex flex-wrap gap-2 mt-1">
                            <button class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">Recent Contacts</button>
                            <button class="px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-xs">Key Contacts</button>
                            <button class="px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-xs">Inactive</button>
                        </div>
                    </div>

                    <!-- Active Filters -->
                    <div class="border-t pt-3">
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-500">2 filters active</span>
                            <button class="text-xs text-blue-600 hover:text-blue-800">Clear All</button>
                        </div>
                    </div>
                </div>
                <p class="text-xs text-red-700 mt-2">Takes ~200px of vertical space, overwhelming on mobile</p>
            </div>

            <!-- AFTER: New Collapsible Design -->
            <div id="after-section" class="p-4 bg-green-50 border-l-4 border-green-400">
                <h3 class="font-medium text-green-800 mb-3">✅ AFTER: Mobile-First Collapsible</h3>

                <!-- Collapsed State (Default) -->
                <div id="collapsed-filters" class="bg-white rounded-lg shadow-sm border border-gray-200">
                    <!-- Compact Filter Bar -->
                    <div class="p-3">
                        <div class="flex items-center gap-3">
                            <!-- Search (always visible) -->
                            <div class="flex-1 relative">
                                <input type="text" placeholder="Search contacts..."
                                       class="w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg text-sm">
                                <svg class="absolute left-2.5 top-2.5 h-4 w-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                </svg>
                            </div>

                            <!-- Filter Toggle Button -->
                            <button onclick="toggleFilters()"
                                    class="touch-target flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg border border-gray-300 transition-colors">
                                <svg class="h-4 w-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
                                </svg>
                                <span class="text-sm font-medium text-gray-700">Filters</span>
                                <span id="filter-count" class="bg-blue-600 text-white text-xs px-2 py-0.5 rounded-full">2</span>
                            </button>
                        </div>

                        <!-- Active Filter Chips (when collapsed) -->
                        <div id="active-chips" class="flex flex-wrap gap-2 mt-3">
                            <div class="filter-chip flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">
                                <span>Recent Contacts</span>
                                <button class="hover:bg-blue-200 rounded-full p-0.5">
                                    <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                            <div class="filter-chip flex items-center gap-1 px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs">
                                <span>This Month</span>
                                <button class="hover:bg-green-200 rounded-full p-0.5">
                                    <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Expandable Filter Panel -->
                    <div id="filter-panel" class="filter-drawer collapsed border-t border-gray-200">
                        <div class="p-4 space-y-4">
                            <!-- Time Range -->
                            <div>
                                <label class="text-xs font-medium text-gray-500 mb-1 block">Time Range</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                    <option>This Month</option>
                                    <option>Last Week</option>
                                    <option>Last Month</option>
                                </select>
                            </div>

                            <!-- Principal -->
                            <div>
                                <label class="text-xs font-medium text-gray-500 mb-1 block">Principal</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                                    <option>All Principals</option>
                                    <option>John Smith</option>
                                    <option>Sarah Johnson</option>
                                </select>
                            </div>

                            <!-- Quick Filters -->
                            <div>
                                <label class="text-xs font-medium text-gray-500 mb-2 block">Quick Views</label>
                                <div class="grid grid-cols-2 gap-2">
                                    <button class="px-3 py-2 bg-blue-100 text-blue-800 rounded-lg text-xs font-medium border border-blue-200">Recent Contacts</button>
                                    <button class="px-3 py-2 bg-gray-100 text-gray-600 rounded-lg text-xs font-medium border border-gray-200 hover:bg-gray-200">Key Contacts</button>
                                    <button class="px-3 py-2 bg-gray-100 text-gray-600 rounded-lg text-xs font-medium border border-gray-200 hover:bg-gray-200">Inactive</button>
                                    <button class="px-3 py-2 bg-gray-100 text-gray-600 rounded-lg text-xs font-medium border border-gray-200 hover:bg-gray-200">High Priority</button>
                                </div>
                            </div>

                            <!-- Actions -->
                            <div class="flex justify-between items-center pt-2 border-t border-gray-200">
                                <span class="text-sm text-gray-500">847 of 1,247 contacts</span>
                                <button class="text-sm text-blue-600 hover:text-blue-800 font-medium">Clear All</button>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="text-xs text-green-700 mt-2">Takes only ~60px when collapsed, ~180px when expanded</p>
            </div>

            <!-- Mock Data Table -->
            <div class="p-4">
                <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50 border-b border-gray-200">
                                <tr>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contact</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Company</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-4 py-3">
                                        <div>
                                            <div class="text-sm font-medium text-gray-900">Sarah Johnson</div>
                                            <div class="text-sm text-gray-500">sarah@example.com</div>
                                        </div>
                                    </td>
                                    <td class="px-4 py-3 text-sm text-gray-900">Acme Corp</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-4 py-3">
                                        <div>
                                            <div class="text-sm font-medium text-gray-900">Mike Chen</div>
                                            <div class="text-sm text-gray-500">mike@example.com</div>
                                        </div>
                                    </td>
                                    <td class="px-4 py-3 text-sm text-gray-900">Tech Solutions</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-4 py-3">
                                        <div>
                                            <div class="text-sm font-medium text-gray-900">Lisa Park</div>
                                            <div class="text-sm text-gray-500">lisa@example.com</div>
                                        </div>
                                    </td>
                                    <td class="px-4 py-3 text-sm text-gray-900">Global Industries</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile Bottom Sheet Demo -->
        <div id="mobile-overlay" class="mobile-overlay fixed inset-0 bg-black bg-opacity-50 z-40 opacity-0 pointer-events-none lg:hidden">
            <div id="mobile-drawer" class="mobile-drawer closed fixed bottom-0 left-0 right-0 bg-white rounded-t-xl z-50 max-h-96 overflow-y-auto">
                <div class="p-4">
                    <!-- Handle -->
                    <div class="w-12 h-1 bg-gray-300 rounded-full mx-auto mb-4"></div>

                    <!-- Mobile Filter Content -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-gray-900">Filter Contacts</h3>

                        <!-- Time Range -->
                        <div>
                            <label class="text-sm font-medium text-gray-700 mb-2 block">Time Range</label>
                            <select class="w-full touch-target px-4 py-3 border border-gray-300 rounded-lg text-base">
                                <option>This Month</option>
                                <option>Last Week</option>
                                <option>Last Month</option>
                            </select>
                        </div>

                        <!-- Principal -->
                        <div>
                            <label class="text-sm font-medium text-gray-700 mb-2 block">Principal</label>
                            <select class="w-full touch-target px-4 py-3 border border-gray-300 rounded-lg text-base">
                                <option>All Principals</option>
                                <option>John Smith</option>
                                <option>Sarah Johnson</option>
                            </select>
                        </div>

                        <!-- Quick Filters -->
                        <div>
                            <label class="text-sm font-medium text-gray-700 mb-3 block">Quick Views</label>
                            <div class="grid grid-cols-2 gap-3">
                                <button class="touch-target px-4 py-3 bg-blue-100 text-blue-800 rounded-lg text-sm font-medium border border-blue-200">Recent</button>
                                <button class="touch-target px-4 py-3 bg-gray-100 text-gray-600 rounded-lg text-sm font-medium border border-gray-200">Key Contacts</button>
                                <button class="touch-target px-4 py-3 bg-gray-100 text-gray-600 rounded-lg text-sm font-medium border border-gray-200">Inactive</button>
                                <button class="touch-target px-4 py-3 bg-gray-100 text-gray-600 rounded-lg text-sm font-medium border border-gray-200">High Priority</button>
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="flex gap-3 pt-4 border-t border-gray-200">
                            <button onclick="closeMobileFilters()" class="flex-1 touch-target px-4 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium">Cancel</button>
                            <button onclick="applyMobileFilters()" class="flex-1 touch-target px-4 py-3 bg-blue-600 text-white rounded-lg font-medium">Apply Filters</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Implementation Notes -->
        <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-sm border border-gray-200 p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Implementation Benefits</h3>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h4 class="font-medium text-green-700 mb-2">✅ Space Efficiency</h4>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>• 70% less vertical space when collapsed</li>
                        <li>• Always-visible search maintains functionality</li>
                        <li>• Active filters shown as compact chips</li>
                        <li>• Progressive disclosure of advanced options</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-medium text-blue-700 mb-2">📱 Mobile Optimized</h4>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>• Touch-friendly 44px minimum targets</li>
                        <li>• Bottom sheet for mobile filter access</li>
                        <li>• Drawer pattern for tablets</li>
                        <li>• Smooth animations and transitions</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-medium text-purple-700 mb-2">🎯 Better UX</h4>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>• Less overwhelming initial view</li>
                        <li>• Clear filter state indication</li>
                        <li>• Easy to clear individual filters</li>
                        <li>• Contextual filter access</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-medium text-orange-700 mb-2">⚡ Performance</h4>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>• Renders fewer DOM elements initially</li>
                        <li>• Lazy loading of filter options</li>
                        <li>• Reduced layout shifts</li>
                        <li>• Maintains all existing functionality</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        let filtersExpanded = false;
        let currentViewport = 'mobile';

        function toggleFilters() {
            const panel = document.getElementById('filter-panel');

            // For mobile, always show bottom sheet
            if (currentViewport === 'mobile') {
                showMobileFilters();
                return;
            }

            // For tablet/desktop, toggle the inline panel
            filtersExpanded = !filtersExpanded;

            console.log('Toggling filters, expanded:', filtersExpanded);

            if (filtersExpanded) {
                panel.classList.remove('collapsed');
                panel.classList.add('expanded');
                panel.style.maxHeight = '500px';
                panel.style.opacity = '1';
            } else {
                panel.classList.add('collapsed');
                panel.classList.remove('expanded');
                panel.style.maxHeight = '0';
                panel.style.opacity = '0';
            }
        }

        function showMobileFilters() {
            const overlay = document.getElementById('mobile-overlay');
            const drawer = document.getElementById('mobile-drawer');

            overlay.classList.remove('opacity-0', 'pointer-events-none');
            overlay.classList.add('opacity-100');
            drawer.classList.remove('closed');
            drawer.classList.add('open');
        }

        function closeMobileFilters() {
            const overlay = document.getElementById('mobile-overlay');
            const drawer = document.getElementById('mobile-drawer');

            overlay.classList.add('opacity-0', 'pointer-events-none');
            overlay.classList.remove('opacity-100');
            drawer.classList.add('closed');
            drawer.classList.remove('open');
        }

        function applyMobileFilters() {
            // Simulate applying filters
            closeMobileFilters();

            // Show success feedback
            const filterCount = document.getElementById('filter-count');
            filterCount.style.backgroundColor = '#10b981';
            setTimeout(() => {
                filterCount.style.backgroundColor = '#2563eb';
            }, 1000);
        }

        function setViewport(type) {
            currentViewport = type;
            const frame = document.getElementById('device-frame');

            console.log('Setting viewport to:', type);

            switch(type) {
                case 'mobile':
                    frame.style.width = '375px';
                    break;
                case 'tablet':
                    frame.style.width = '768px';
                    break;
                case 'desktop':
                    frame.style.width = '1024px';
                    break;
            }

            // Close any open filters when switching
            if (filtersExpanded) {
                filtersExpanded = false;
                const panel = document.getElementById('filter-panel');
                panel.classList.add('collapsed');
                panel.classList.remove('expanded');
                panel.style.maxHeight = '0';
                panel.style.opacity = '0';
            }
            closeMobileFilters();
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded, setting up initial state');

            // Set initial viewport to tablet for better demo
            setViewport('tablet');

            // Ensure filter panel starts collapsed
            const panel = document.getElementById('filter-panel');
            if (panel) {
                panel.style.maxHeight = '0';
                panel.style.opacity = '0';
            }
        });

        // Close mobile filters when clicking overlay
        document.getElementById('mobile-overlay').addEventListener('click', function(e) {
            if (e.target === this) {
                closeMobileFilters();
            }
        });
    </script>
</body>
</html>