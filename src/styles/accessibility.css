/*
 * KitchenPantry CRM Accessibility Patterns
 * Enhanced accessibility utilities for WCAG AAA compliance
 */

@layer utilities {
  /* Motion Preferences - Reduce animations for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
    
    /* Specifically disable button hover animations */
    .btn-primary:hover,
    .button:hover,
    button:hover {
      transform: none !important;
    }
  }

  /* Enhanced Focus Patterns */
  .focus-ring-inverse:focus-visible {
    @apply ring-white ring-offset-gray-900;
  }
  
  .focus-ring-primary:focus-visible {
    @apply ring-primary ring-offset-background;
  }
  
  .focus-ring-destructive:focus-visible {
    @apply ring-destructive ring-offset-background;
  }

  /* Disabled State Patterns - Beyond Opacity for Colorblind Users */
  .disabled-pattern {
    @apply relative overflow-hidden;
  }
  
  .disabled-pattern::after {
    content: '';
    @apply absolute inset-0 pointer-events-none;
    background-image: repeating-linear-gradient(
      45deg,
      transparent,
      transparent 4px,
      rgb(0 0 0 / 0.05) 4px,
      rgb(0 0 0 / 0.05) 8px
    );
  }

  .disabled-pattern.dark::after {
    background-image: repeating-linear-gradient(
      45deg,
      transparent,
      transparent 4px,
      rgb(255 255 255 / 0.05) 4px,
      rgb(255 255 255 / 0.05) 8px
    );
  }

  /* Skip Links for Screen Readers */
  .sr-skip-link {
    @apply absolute -top-full left-4 z-50 bg-primary text-primary-foreground px-4 py-2 rounded-md shadow-lg transition-all;
  }
  
  .sr-skip-link:focus {
    @apply top-4;
  }

  /* High Contrast Mode Support */
  @media (prefers-contrast: high) {
    .text-muted {
      color: hsl(var(--text-body)) !important;
    }
    
    .border {
      @apply border-2;
    }
    
    .shadow-sm {
      @apply shadow-md;
    }
  }

  /* Note: Legacy tag classes removed - now using Badge variant system */

  /* Accessible Loading States */
  .loading-shimmer {
    @apply bg-gradient-to-r from-muted via-muted/50 to-muted bg-[length:200%_100%] animate-pulse;
  }

  @media (prefers-reduced-motion: reduce) {
    .loading-shimmer {
      @apply animate-none bg-muted;
    }
  }

  /* Screen Reader Only Text */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Keyboard Navigation Helpers */
  .keyboard-only:not(:focus-visible) {
    opacity: 0;
    pointer-events: none;
  }

  /* Touch Target Sizing - Minimum 44px for accessibility */
  .touch-target {
    @apply min-h-[2.75rem] min-w-[2.75rem]; /* 44px minimum */
  }

  /* Ensure MFB Green Consistency */
  .brand-primary {
    background-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
  }

  .brand-primary-text {
    color: hsl(var(--primary));
  }

  .brand-primary-border {
    border-color: hsl(var(--primary));
  }
}